syntax = "proto3";

package flight.v1;

option java_multiple_files = true;
option java_package = "com.example.flight.v1.grpc";

import "google/protobuf/timestamp.proto";
import "google/protobuf/empty.proto";

message Flight {
    string flight_id = 1;
    string flight_name = 2;
    string source_name = 3;
    string destination_name = 4;
    double price = 5;
    string seat_type = 6;
    string additional_info = 7;
    repeated Schedule schedules = 8;
}

message Schedule {
    string schedule_id = 1;
    int32 day_of_week = 2;
    string departure_time = 3;
    string arrival_time = 4;
    int32 available_seats = 5;
    string availability_status = 6;
}


message SearchFlightsRequest {
    string source_name = 1;
    string destination_name = 2;
    string departure_date = 3;
}

message GetFlightDetailsRequest {
    string schedule_id = 1;
    string departure_date = 2;
}

message SearchFlightsResponse {
    repeated Flight flights = 1;
}

message GetFlightDetailsResponse {
    Flight flight = 1;
    string message = 2;
    string departure_date = 3;
}

message CreateFlightRequest {
    Flight flight = 1;
}

message CreateFlightResponse {
    Flight flight = 1;
}

message LockSeatsRequest {
    string flight_id = 1;
    string schedule_id = 2;
    int32 seats_to_lock = 3;
    string order_id = 4;
}

message LockSeatsResponse {
    bool success = 1;
    string message = 2;
}

message UpdatePaymentStatusRequest {
    string order_id = 1;
    bool payment_status = 2;
}

message UpdatePaymentStatusResponse {
    bool success = 1;
    string message = 2;
}

service FlightService {
    rpc SearchFlights(SearchFlightsRequest) returns (SearchFlightsResponse);
    rpc GetFlightDetails(GetFlightDetailsRequest) returns (GetFlightDetailsResponse);
    rpc CreateFlight(CreateFlightRequest) returns (CreateFlightResponse);
    rpc LockSeats(LockSeatsRequest) returns (LockSeatsResponse);
    rpc UpdatePaymentStatus(UpdatePaymentStatusRequest) returns (UpdatePaymentStatusResponse);
}
